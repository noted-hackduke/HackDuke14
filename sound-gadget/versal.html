<!DOCTYPE html>
<html>
<head>
<title>Interval Player</title>
<script src="bower_components/versal-component-runtime/dist/runtime.min.js"></script>
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="audiosynth.js"></script>
<link rel="import" href="bower_components/versal-gadget-api/versal-gadget-api.html">
</head>

<body>

<div id="notesEditor">
  <span>Note 1: </span>
  <textarea id="note1"></textarea>
  <span> Octave: </span>
  <textarea id="x"></textarea><br>

  <span>Note 2: </span>
  <textarea id="note2"></textarea>

  <span> Octave: </span>
  <textarea id="y"></textarea><br><br>

</div>
	<span id="playBtn">Play</span>

	<script type="text/javascript">

	var path='assets/Piano.ff.';
	var sound;

	var playSecond = function()
	{
		var piano = Synth.createInstrument('piano');
		piano.play($('#note2').val(), Math.floor($('#y').val()), 1);

	}

	var playFirst = function()
	{

		var piano = Synth.createInstrument('piano');
		piano.play($('#note1').val(), Math.floor($('#x').val()), 1);

		setTimeout(function(){playSecond()}, 200);
	}

	var playSound = function () {
		var note;
		
		for(var i=0; i<=7; i++)
		{
			sound=new Audio(path + note + i + '.mp3');
			sound.play();
		}
		console.log('played sound!');
	}

	window.addEventListener('HTMLImportsLoaded', function(){

	  var player = new VersalPlayerAPI();

	  $('#playBtn').click(playFirst);

	  player.on('editableChanged', function(editableObj){
	  });

	  player.on('attributesChanged', function(attrs){
	  });

	  player.startListening();
	  player.watchBodyHeight();

	});

	</script>
</body>
</html>
