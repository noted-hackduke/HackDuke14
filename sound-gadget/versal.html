<!DOCTYPE html>
<html>
<head>
<title>Interval Player</title>
<script src="bower_components/versal-component-runtime/dist/runtime.min.js"></script>
<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="audiosynth.js"></script>
<link rel="import" href="bower_components/versal-gadget-api/versal-gadget-api.html">
</head>

<body>

<div id="notesEditor">
  <span>Note 1: </span>
  <input id="note1">

  <span>Note 2: </span>
  <input id="note2">

</div>
	<span id="playBtn">Play</span>

	<script type="text/javascript">

	var playSound = function (sound) {
		var piano = Synth.createInstrument('piano');

		var note = sound[0];
		var octave = Math.floor(sound[1]);

		console.log(note, octave);
		piano.play(note, octave, 1);
	}

	var playChord = function (chord) {
		var sounds = chord.split(' ');
		for (var i=0; i<sounds.length; i++) {
			playSound(sounds[i]);
		}
	}

	var playSecond = function()
	{
		playChord($('#note2').val());
	}

	var playFirst = function()
	{
		playChord($('#note1').val());
		setTimeout(playSecond, 200);
	}

	window.addEventListener('HTMLImportsLoaded', function(){

	  var player = new VersalPlayerAPI();

	  $('#playBtn').click(playFirst);

	  player.on('editableChanged', function(editableObj){
	  });

	  player.on('attributesChanged', function(attrs){
	  });

	  player.startListening();
	  player.watchBodyHeight();

	});

	</script>
</body>
</html>
