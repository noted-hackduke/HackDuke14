<!DOCTYPE html>
<html>
<head>
<title>Music Reader</title>
<script src="bower_components/versal-component-runtime/dist/runtime.min.js"></script>
<script src="bower_components/jquery/dist/jquery.js"></script>
<link rel="import" href="bower_components/versal-gadget-api/versal-gadget-api.html">
</head>

<body>

<div id="notesEditor">
<span>Notes:<br></span>
  <textarea id="notesAbc">
C1 C1 G1 G1|A1 A1 G2| F1 F1 E1 E1| D1 D1 C2|
  </textarea>

</div>
	<span id="playBtn">Play</span>

	<script type="text/javascript">

	var path='assets/Piano.ff.';
	var sound;
	
	var playSound = function () {
		var notes=document.getElementById("notesAbc").value.split('\W');
		var n;
		
		for(var i=0; i<notes.length; i++)
		{
			n=notes[i];
			sound=new Audio(path + n.charAt(0) + '4.mp3');
			sound.play();
			
			console.log(n);
		}
	}

	window.addEventListener('HTMLImportsLoaded', function(){

	  var player = new VersalPlayerAPI();

	  $('#playBtn').click(playSound);

	  player.on('editableChanged', function(editableObj){
	  });

	  player.on('attributesChanged', function(attrs){
	  });

	  player.startListening();
	  player.watchBodyHeight();

	});

	</script>
</body>
</html>
